#!/usr/bin/python2.6
# Copyright (c) 2009-2010 Simon van Heeringen <s.vanheeringen@ncmls.ru.nl>
#
# This module is free software. You can redistribute it and/or modify it under 
# the terms of the MIT License, see the file COPYING included with this 
# distribution.

from motiftools.motif import *
from optparse import OptionParser
import sys

VERSION = "0.1"

parser = OptionParser(version="%prog " + VERSION)
parser.add_option("-p", "--pwmfile", dest="pwmfile", help="Motifs in PWM format", metavar="FILE")
parser.add_option("-i", "--inputfile", dest="inputfile", help="List of motif IDs", metavar="FILE")

(options, args) = parser.parse_args()

if not options.pwmfile or not options.inputfile:
	parser.print_help()
	sys.exit()

motifs = pwmfile_to_motifs(options.pwmfile)
ids = [line.strip().split("\t")[0] for line in open(options.inputfile)]

for motif in [m for m in motifs if m.id in ids]:
	print motif.to_pwm()
